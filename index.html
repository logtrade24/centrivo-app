<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Centrivo App</title>

  <style>
    body{
      margin:0;
      font-family:Arial,sans-serif;
      background:#0b1220;
      color:#fff;
      display:flex;
      min-height:100vh;
      align-items:center;
      justify-content:center;
      text-align:center;
    }

    .box{
      max-width:500px;
      padding:30px;
      width:100%;
    }

    h1{
      margin-bottom:20px;
      font-size:32px;
    }

    input{
      width:100%;
      padding:16px;
      font-size:18px;
      border-radius:8px;
      border:none;
      outline:none;
      text-align:center;
      margin-bottom:20px;
    }

    .result{
      margin-top:20px;
      font-size:18px;
      min-height:40px;
    }

    .ok{ color:#21d4a6; }
    .error{ color:#ff6b6b; }
  </style>
</head>
<body>

  <div class="box">
    <h1>Rejestrator czasu pracy</h1>

    <input 
      type="text" 
      id="codeInput" 
      placeholder="Zeskanuj kod..." 
      autofocus
    />

    <div class="result" id="result"></div>
  </div>

  <script>
    const input = document.getElementById("codeInput");
    const result = document.getElementById("result");

    input.addEventListener("keypress", async function(e){
      if(e.key === "Enter"){
        const code = input.value.trim();
        if(!code) return;

        result.textContent = "Przetwarzanie...";
        result.className = "result";

        try{
          const response = await fetch("https://api.centrivo.pl/scan", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ code })
          });

          const data = await response.json();

          if(data.success){
            result.innerHTML = `
              <div class="ok">
                ${data.employee}<br>
                ${data.action}<br>
                Status: ${data.status}
              </div>
            `;
          }else{
            result.innerHTML = `<div class="error">${data.message}</div>`;
          }

        }catch(err){
          result.innerHTML = `<div class="error">Błąd połączenia z API</div>`;
        }

        input.value = "";
        input.focus();
      }
    });
  </script>

</body>
</html>

